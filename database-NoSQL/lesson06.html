<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>NoSQL</title>
        <link rel="stylesheet" href="style.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" 
            rel="stylesheet" 
            integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" 
            crossorigin="anonymous">
    </head>
    <body>
		<!--Página-Cabeçalho-->
		<header class="header"><h1>Curso NoSQL: Bancos de dados orientados à grafos</h1></header>
		<!--Página-Conteúdo-->
		<section class="content">
            <header><h2 class="posts_title"></h2></header>
            <article class="post">
                <header><h3 class="post_title">Model: Graph Store (Neo4j)</h3></header>
                <p class="post_content">
                    <h4>História</h4>
                        Grafos são um conceito extremamente antigo.<br>
                        A primeira menção a isso remonta a <a href="https://en.wikipedia.org/wiki/Graph_theory" target="_blank">Leonhard Euler em 1736</a>, de armazenamento e visualização de dados e suas relações.<br> 
                        Criado em 2007, tornou-se rapidamente o banco mais usado no seguimento, e também um dos mais rápidos (Grafo Nativo).<br>
                        <b>License:</b> Source code: GPLv3 and AGPLv3 e Binaries: Freemium registerware.<br>
                        <b>Scheme Free</b>: Nada precisa ser pré-definido. Tudo é identificado em tempo de criação do objeto.<br> 
                        Nós não necessariamente precisam ter as mesmas propriedades. <br><br>                  
                        
                    <h4>Introdução</h4>
                        São estruturas matemáticas composta de duas partes básicas, nós e arestas (ou vértices).<br>
                        <b>Nó:</b> Representa o dado, uma entidade do sistema, por exemplo, um usuário, um role, um scope.<br>
                        <b>Arestas ou Vértices:</b> São os relacionamentos em si.<br>
                        <b>Cypher</b> é a linguagem oficial de consultas.<br><br>
                        <img src="./img/NoSQL_Graph_Example_01.png" alt="NoSQL Graph Image" style="width: 30vw; height: 80vh;" /><br>

                        <ul><h5>Formas de apresentação dos dados</h5>
                            <li>Nativa (gráfica)</li>
                            <li>json (texto)</li>
                            <li>tabela</li>
                            <li>código</li>
                        </ul>
                        <ul><h5>Libraries</h5>
                            <li>NeoVis.js</li>
                            <li>D3.js</li>
                        </ul>

                    <h4>Tipos de Grafos</h4>
                        <b>Grafo Nativo</b><br>
                        Fisicamente na memória, os nós e relacionamentos apontam uns para os outros. Isso cria o que é chamado de adjacência livre de índices (index-free adjacency) e, desta forma, os sistemas de grafos nativos, podem fazer uma query através de travessias de grafos, pulando de um endereço para outro na memória de forma absurdamente rápida. Na verdade, o chamado pointer hoping é a forma mais rápida de um computador acessar um dado relacionado. 
                        Você pode ver mais detalhes sobre este tema neste <a href="https://dmccreary.medium.com/how-to-explain-index-free-adjacency-to-your-manager-1a8e68ec664a" target="_blank">excelente artigo</a>
                        
                        <br><br>
                        <b>Grafo Não Nativo</b><br>
                        Se apoiam sobre bancos de dados relacionais ou não relacionas já existentes para que possam gerenciar seus relacionamentos. Em outras palavras, eles tem uma representação de um grafo em forma de tabelas ou documentos, o que os torna cerca de 1000x mais lento do que um grafo nativo, somente pelo fato de que a maioria dos dados que precisamos acessar não está diretamente carregado na memória.<br><br>
                        
                    <h4>Usabilidade</h4>
                        Comum em detecção de fraudes, mecanismos de recomendação, redes sociais, sistemas de arquivos, games, etc.<br>
                        logística, veja o <a href="https://pt.wikipedia.org/wiki/Problema_do_caixeiro-viajante" target="_blank">problema do caixeiro viajante</a>.<br>
                        Internet, que, se pensarmos bem, é um grafo gigante e roteadores que se utilizam de algoritmos de menor caminho (como <a href="https://pt.wikipedia.org/wiki/Algoritmo_de_Dijkstra" target="_blank">Dijkstra</a>) para encontrar o menor caminho entre outros roteadores até o IP de destino.<br>

                        <ul><h5>Vantagens</h5>
                            <li>Velocidade de execução de queries</li>
                            <li>Facilidade e flexibilidade de modelagem</li>
                        </ul>
                        <ul><h5>Desvantagens</h5>
                            <li>Ainda não muito difundido - não contam com bibliotecas ou suportes muito grandes</li>
                            <li>Apesar de ter bibliotecas para a maioria das linguagens mais usadas, ainda precisam de alguns ajustes finos, principalmente no que diz respeito a queries.</li>
                            <li>Não existem boas ferramentas de visualização que possam ser distribuídas em larga escala para o front-end, sem divulgar dados sensíveis como usuários e senhas do banco.</li>
                        </ul>
                        <ul><h5>Cases</h5>

                        </ul>

                    <h4>Exemplos</h4>
                        Criação de uma estrutura de registros que compõem os dados de uma rede social utilizando um sandbox do Neo4j.<br>
                        NÓS e RELACIONAMENTOS podem ter propriedades e labels.<br>
                        As labels podem ser criadas, atualizadas ou removidas a qualquer momento, na criação ou atualização do NÓ ou RELACIONAMENTO.<br>

                        <br><b>Consulta de NÓ</b>
                            <pre><code>
                                // Exemplo sem condição (Todos)
                                MATCH (var) RETURN var;

                                // Exemplo com condição
                                MATCH (var:Client) WHERE var.name = 'Heviane' RETURN var;
                            </code></pre>
                            MATCH é o comando para buscar o NÓ, sempre será usado em conjunto nas operações em NÓS já existentes.<br>
                            var é a variável atribuída a label Client que e que vai receber o resultado da consulta.<br>          

                        <br><b>Criação de NÓ</b>
                            <pre><code>
                                CREATE (:Client {name: 'Heviane', age: 39, hobbies: ['Caminhada', 'Musculação']});
                            </code></pre>
                            Label "Client" é opcional, é o que vem depois dos dois pontos (:).<br>
                            Node é o conjunto inteiro do dado, é o dado em si.<br>
                            name, age, hobbies são as propriedades do dado.<br>

                        <br><b>Criação de NÓ com relacionamento</b>
                            <pre><code>
                                CREATE (:Client {name: 'Maria', age: 57, hobbies: ['Jardinagem', 'Cozinhar']}) 
                                - [:Bloqueado] -> (:Client {name: 'Nina', hobbies: ['Carpintaria']});
                            </code></pre>
                            Colchetes [] definem uma relacionamento.<br>
                            Seta -> para indicar a direção do relacionamento (vértice).<br>
                            Relacionamentos podem ou não ter uma label, que é definida dentro dos colchetes<br>
                            O comando vai acima vai criar: Um NÓ -> Um Relacionamento -> Um NÓ. (O comando CREATE não precisa ser replicado)<br>

                        <br><b>Criação de Relacionamento entre NÓS já existentes</b>
                            <pre><code>
                                // Heviane vai bloquear a Maria.
                                MATCH (Heviane:Client{name: 'Heviane'}),(Maria:Client{name: 'Maria'})
                                CREATE (Heviane)-[:Bloqueado]->(relMaria);

                                // Heviane vai desbloquear a Maria.
                                MATCH (Heviane:Client{name: 'Heviane'})-[rel:Bloqueado]-() DELETE rel;
                            </code></pre>
                            Parenteses vazio () é um Nó anonimo, usado para deletar todos.<br>

                        <br><b>Exclusão de NÓ</b>
                            <pre><code>
                                // Atribuindo o nó a variável Heviane
                                MATCH (Heviane:Client{name: 'Heviane'}) DELETE Heviane;
                            </code></pre>

                        <br><b>Atualização de propriedades de NÓ</b>
                            <pre><code>
                                // Atualizando a propriedade age
                                MATCH(nina:Client{name: 'Nina'}) SET nina.age = nina.age + 1;

                                // Atualizando a propriedade hobbies
                                MATCH(nina:Client{name: 'Nina'}) SET nina.hobbies = ['Caminhada'];
                            </code></pre>
                            O fluxo de atualização é o mesmo para NÓS e RELACIONAMENTOS, o que for atribuído a variável.<br>   
                            
                        <br><b>Atualização de labels de NÓ</b>
                            <pre><code>
                                MATCH(nina:Client{name: 'Nina'}) SET nina:Client_Premium;
                            </code></pre>
                </p>
            </article>

            <article class="post"> 
                <header><h3 class="post_title">References</h3></header>
                <p class="post_content">
                    <ul>
                        <li><a href="https://sandbox.neo4j.com" target="_blank">sandbox.neo4j.com</a></li>
                    </ul>
                </p>
            </article>
		</section>
		<!--Página-Rodapé-->
		<footer class="footer">
            <div class="footer_list">
                <li><a href="https://www.linkedin.com/in/heviane-bastos" target="_blank">linkedin</a></li>
                <li><a href="https://github.com/heviane" target="_blank">github</a></li>				
            </div>
        </footer>
        <!-- Bootstrap Bundle em CDN -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"   
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" 
        crossorigin="anonymous"></script>
    </body>
</html>